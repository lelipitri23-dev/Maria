<!DOCTYPE html>
<html lang="id" class="scroll-smooth dark">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#e97991">
  <meta name="google-site-verification" content="RGW8HHjrW7oEipY0bk7BK0c972YB-ZGCzrpx9ETlkk0" />
  <meta name="msvalidate.01" content="87763CAEE8A6CA4B49B69AE4943336B3" />

  <title><%= pageTitle %></title>
  <meta name="title" content="<%= pageTitle %>">
  <meta name="description" content="<%= (typeof pageDescription !== 'undefined') ? pageDescription : '' %>">

  <meta property="og:type" content="website">
  <meta property="og:url" content="<%= (typeof pageUrl !== 'undefined') ? pageUrl : '' %>">
  <meta property="og:title" content="<%= pageTitle %>">
  <meta property="og:description" content="<%= (typeof pageDescription !== 'undefined') ? pageDescription : '' %>">
  <meta property="og:image" content="<%= (typeof pageImage !== 'undefined' && pageImage) ? pageImage : '/images/default.jpg' %>">
  <meta property="og:site_name" content="<%= (typeof siteName !== 'undefined') ? siteName : 'NontonHentai' %>">
  <meta property="og:locale" content="id_ID">

  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="<%= (typeof pageUrl !== 'undefined') ? pageUrl : '' %>">
  <meta property="twitter:title" content="<%= pageTitle %>">
  <meta property="twitter:description" content="<%= (typeof pageDescription !== 'undefined') ? pageDescription : '' %>">
  <meta property="twitter:image" content="<%= (typeof pageImage !== 'undefined' && pageImage) ? pageImage : '/images/default.jpg' %>">

  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.1/css/all.css">

  <script src="https://cdn.tailwindcss.com"></script>
  
  <style>
    /* DEFINISI WARNA DINAMIS (LIGHT & DARK) */
    :root {
      /* -- Light Mode -- */
      --primary-color: #e97991;       /* Definisi warna Pink */
      --primary-hover: #d15f76;
      
      --bg-body: #f3f4f6;       
      --bg-card: #ffffff;       
      --bg-darker: #e5e7eb;     
      --text-main: #1f2937;     
      --text-muted: #6b7280;    
      --border-color: #e5e7eb;  
    }

    .dark {
      /* -- Dark Mode (Default) -- */
      --primary-color: #e97991;       /* Sama di dark mode */
      --primary-hover: #d15f76;

      --bg-body: #16151d;       
      --bg-card: #22202b;       
      --bg-darker: #22202b;     
      --text-main: #ececec;     
      --text-muted: #a0a0a0;    
      --border-color: #33303f;  
    }

    body { 
      background-color: var(--bg-body); 
      color: var(--text-main); 
      transition: background-color 0.3s, color 0.3s;
    }

    /* Custom Scrollbar */
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: var(--bg-darker); }
    ::-webkit-scrollbar-thumb { background: var(--border-color); border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: var(--primary-color); }
    
    .shme { display: none; } 
  </style>

  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            // Menghubungkan class Tailwind ke variabel CSS di atas
            primary: 'var(--primary-color)',
            'primary-hover': 'var(--primary-hover)',
            
            dark: 'var(--bg-body)',         
            card: 'var(--bg-card)',          
            darker: 'var(--bg-darker)',       
            muted: 'var(--text-muted)',
            
            // Override warna border hardcoded
            '#33303f': 'var(--border-color)', 
          },
          fontFamily: {
            sans: ['Rubik', 'sans-serif'],
          }
        }
      }
    }

    // Cek Tema saat loading agar tidak kedip
    if (localStorage.getItem('theme') === 'light') {
      document.documentElement.classList.remove('dark');
    } else {
      document.documentElement.classList.add('dark'); 
    }
  </script>
</head>

<body class="antialiased font-sans selection:bg-primary selection:text-white flex flex-col min-h-screen">

  <nav class="sticky top-0 z-50 w-full bg-card/90 backdrop-blur-md border-b border-[#33303f] shadow-lg transition-colors duration-300">
    <div class="max-w-[1200px] mx-auto px-4 h-[65px] flex items-center justify-between">
      
      <div class="flex items-center gap-4">
        <button id="mobile-menu-btn" class="lg:hidden text-2xl text-[var(--text-main)] hover:text-primary transition-colors">
          <i class="fas fa-bars"></i>
        </button>
        
        <a href="/home" class="flex items-center gap-2 group">
          <div class="w-8 h-8 rounded-full bg-primary flex items-center justify-center shadow-lg shadow-primary/20">
            <i class="fas fa-play text-white text-xs"></i>
          </div>
          <h1 class="text-lg font-extrabold uppercase tracking-wider text-[var(--text-main)]">
            <%= (typeof siteName !== 'undefined') ? siteName : 'NontonHentai' %>
          </h1>
        </a>
      </div>

      <div class="hidden lg:block relative flex-1 max-w-md mx-8">
        <form action="/search" method="get" class="relative group">
          <input type="text" name="q" placeholder="Cari judul/genre..." 
            class="w-full bg-darker border border-[#33303f] rounded-full py-2 px-5 pl-10 text-sm text-[var(--text-main)] focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all placeholder-gray-500">
          <button type="submit" class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 group-focus-within:text-primary">
            <i class="fas fa-search"></i>
          </button>
        </form>
      </div>

      <div class="hidden lg:flex items-center gap-6">
        <ul class="flex items-center gap-6 text-xs font-bold uppercase text-muted">
          <li><a href="/home" class="hover:text-primary transition-colors">Home</a></li>
          <li><a href="/hentai-list" class="hover:text-primary transition-colors">Hentai List</a></li>
          <li><a href="/genre-list" class="hover:text-primary transition-colors">Genre</a></li>
          <li><a href="/jadwal" class="hover:text-primary transition-colors">Jadwal</a></li>
          <li><a href="/bookmarks" class="hover:text-primary transition-colors">Bookmark</a></li>
        </ul>

        <button id="theme-toggle" class="w-8 h-8 rounded-full bg-darker border border-[#33303f] flex items-center justify-center text-yellow-400 hover:bg-primary hover:text-white transition-all shadow-sm">
          <i class="fas fa-sun hidden dark:block"></i> 
          <i class="fas fa-moon block dark:hidden text-gray-600"></i> 
        </button>

        <a href="/random" class="bg-primary hover:bg-primary-hover text-white text-xs font-bold px-4 py-1.5 rounded-full transition-all shadow-lg shadow-primary/30 uppercase">Acak</a>
      </div>

      <button id="theme-toggle-mobile" class="lg:hidden w-8 h-8 rounded-full bg-darker border border-[#33303f] flex items-center justify-center text-yellow-400 hover:bg-primary hover:text-white transition-all">
          <i class="fas fa-sun hidden dark:block"></i>
          <i class="fas fa-moon block dark:hidden text-gray-600"></i>
      </button>

    </div>

    <div id="mobile-menu" class="hidden lg:hidden bg-card border-t border-[#33303f] absolute w-full left-0 shadow-xl transition-colors duration-300">
      <div class="p-4 space-y-4">
        <form action="/search" method="get" class="relative">
          <input type="text" name="q" placeholder="Cari..." class="w-full bg-darker p-3 rounded-lg text-[var(--text-main)] border border-[#33303f] text-sm">
        </form>
        <ul class="flex flex-col gap-2 font-bold text-muted text-sm uppercase">
          <li><a href="/home" class="block p-3 hover:bg-primary/10 hover:text-primary rounded border-b border-[#33303f]">Home</a></li>
          <li><a href="/hentai-list" class="block p-3 hover:bg-primary/10 hover:text-primary rounded border-b border-[#33303f]">Hentai List</a></li>
          <li><a href="/genre-list" class="block p-3 hover:bg-primary/10 hover:text-primary rounded border-b border-[#33303f]">Genre</a></li>
          <li><a href="/jadwal" class="block p-3 hover:bg-primary/10 hover:text-primary rounded border-b border-[#33303f]">Jadwal</a></li>
          <li><a href="/bookmarks" class="block p-3 hover:bg-primary/10 hover:text-primary rounded border-b border-[#33303f]">Bookmark</a></li>
          <li><a href="/random" class="block p-3 text-primary font-extrabold">Acak</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <div id="content" class="flex-grow w-full max-w-[1200px] mx-auto mt-0 md:mt-6 px-0 md:px-4">
    <div class="wrapper flex flex-col lg:flex-row gap-0 md:gap-6 items-start">
      
      <script>
        const btn = document.getElementById('mobile-menu-btn');
        const menu = document.getElementById('mobile-menu');
        btn.addEventListener('click', () => {
          menu.classList.toggle('hidden');
        });

        const toggleBtns = document.querySelectorAll('#theme-toggle, #theme-toggle-mobile');
        const htmlElement = document.documentElement;

        toggleBtns.forEach(btn => {
          btn.addEventListener('click', () => {
            if (htmlElement.classList.contains('dark')) {
              htmlElement.classList.remove('dark');
              localStorage.setItem('theme', 'light');
            } else {
              htmlElement.classList.add('dark');
              localStorage.setItem('theme', 'dark');
            }
          });
        });
      </script>
